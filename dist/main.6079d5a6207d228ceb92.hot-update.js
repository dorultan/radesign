exports.id = "main";
exports.modules = {

/***/ "./api/controllers/projectsController.js":
/*!***********************************************!*\
  !*** ./api/controllers/projectsController.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _models_project__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../models/project */ \\\"./api/models/project.js\\\");\\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! multer */ \\\"multer\\\");\\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_1__);\\n/* harmony import */ var multer_s3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! multer-s3 */ \\\"multer-s3\\\");\\n/* harmony import */ var multer_s3__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(multer_s3__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! aws-sdk */ \\\"aws-sdk\\\");\\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(aws_sdk__WEBPACK_IMPORTED_MODULE_3__);\\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! fs */ \\\"fs\\\");\\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_4__);\\n\\n\\n\\n\\n\\n\\nvar replaceSpaceFromString = function replaceSpaceFromString(string) {\\n  var str = string.toLowerCase();\\n  while (str.includes(' ')) {\\n    str = str.replace(' ', '-');\\n  }\\n\\n  return str;\\n};\\n\\nvar deleteFiles = function deleteFiles(arr, cb) {\\n\\n  arr.forEach(function (filePath, idx) {\\n\\n    fs__WEBPACK_IMPORTED_MODULE_4___default.a.unlink(filePath, function (err) {\\n\\n      if (err) {\\n        cb(err);\\n\\n        return;\\n      } else if (idx === arr.length - 1) {\\n        cb(null);\\n      }\\n    });\\n  });\\n};\\n\\naws_sdk__WEBPACK_IMPORTED_MODULE_3___default.a.config.update({\\n  accessKeyId: \\\"AKIAJCF6UXSVA3ZA6E3Q\\\" || false,\\n  secretAccessKey: \\\"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\\\" || false,\\n  region: 'eu-west-2'\\n});\\nvar s3 = new aws_sdk__WEBPACK_IMPORTED_MODULE_3___default.a.S3();\\n\\nvar storage = multer_s3__WEBPACK_IMPORTED_MODULE_2___default()({\\n  s3: s3,\\n  bucket: 'radesign',\\n  acl: 'public-read',\\n  metaData: function metaData(req, file, cb) {\\n    cb(null, { fieldName: replaceSpaceFromString(file.fieldName), filename: replaceSpaceFromString(file.originalname) });\\n  },\\n  key: function key(req, file, cb) {\\n    cb(null, Date.now().toString());\\n  }\\n});\\n\\nvar upload = multer__WEBPACK_IMPORTED_MODULE_1___default()({ storage: storage }).single('image');\\n\\nvar projectsController = {\\n  get: function get(req, res, next) {\\n\\n    if (req.query.uid) {\\n      _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOne({ uid: req.query.uid }).exec(function (err, data) {\\n\\n        if (err) {\\n          return res.status(404).json({ message: \\\"Not found\\\" });\\n        }\\n\\n        return res.status(200).json(data);\\n      });\\n    } else {\\n      next();\\n    }\\n  },\\n  getAll: function getAll(req, res) {\\n\\n    _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].find().exec(function (err, data) {\\n\\n      if (err) {\\n        return res.status(404).json({ message: \\\"Projects not found\\\" });\\n      }\\n\\n      res.status(200).json(data);\\n    });\\n  },\\n  addImage: function addImage(req, res) {\\n    upload(req, res, function (err) {\\n      var file = req.file;\\n\\n      var uid = req.body.uid;\\n\\n      if (err instanceof multer__WEBPACK_IMPORTED_MODULE_1___default.a.MulterError) {\\n        return res.status(400).json({ multerError: err });\\n      }\\n\\n      _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOneAndUpdate({ uid: uid }, {\\n        $push: {\\n          uploads: file.path\\n        }\\n      }, {\\n        new: true\\n      }).exec(function (err, data) {\\n        if (err) {\\n          return res.status(400).json({ error: err });\\n        }\\n\\n        return res.status(200).json(data);\\n      });\\n    });\\n  },\\n  removeImage: function removeImage(req, res) {\\n    var uid = req.body.uid;\\n    var path = req.body.path;\\n    _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOneAndUpdate(id, {\\n      $pull: {\\n        uploads: path\\n      }\\n    }, {\\n      upsert: true,\\n      new: true\\n    }).exec(function (err, data) {\\n\\n      if (err) {\\n        return res.status(400).json({ error: err });\\n      }\\n\\n      fs__WEBPACK_IMPORTED_MODULE_4___default.a.unlink(path, function (err) {\\n        if (err) {\\n          return res.status(400).json({ error: err });\\n        }\\n        return res.status(200).json(data);\\n      });\\n    });\\n  },\\n  create: function create(req, res) {\\n\\n    upload(req, res, function (err) {\\n      var file = req.file;\\n      if (err instanceof multer__WEBPACK_IMPORTED_MODULE_1___default.a.MulterError) {\\n        return res.status(500).json(err);\\n      }\\n      console.log(err);\\n      console.log(file, req.file);\\n\\n      if (file) {\\n        _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].create({\\n          imageUrl: file.path,\\n          description: req.body.description,\\n          name: req.body.name,\\n          uid: replaceSpaceFromString(req.body.name),\\n          tag: req.body.tag,\\n          color: req.body.color\\n        }, function (err, data) {\\n          if (err) {\\n            return res.status(404).json({ message: err.message });\\n          }\\n\\n          return res.status(200).json(data);\\n        });\\n      } else {\\n        res.status(500).json({ message: \\\"Can't upload image.\\\" });\\n      }\\n    });\\n  },\\n  update: function update(req, res) {\\n    var uid = req.body.uid;\\n    var body = req.body;\\n    _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOneAndUpdate({ uid: uid }, {\\n      description: body.description,\\n      name: body.name,\\n      tag: req.body.tag,\\n      color: req.body.color,\\n      uid: replaceSpaceFromString(req.body.uid)\\n    }, { new: true }).exec(function (err, data) {\\n      if (err) {\\n        return res.status(404).json({ message: 'The project is not updated.' });\\n      }\\n\\n      res.status(200).json(data);\\n    });\\n  },\\n  updateImage: function updateImage(req, res, next) {\\n\\n    uploadWithMetaImage(req, res, function (err) {\\n      var file = req.file;\\n      var uid = req.body.uid;\\n      var body = req.body;\\n\\n      if (file) {\\n        _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOneAndUpdate({ uid: uid }, {\\n          imageUrl: file.path,\\n          description: body.description,\\n          name: body.name,\\n          tag: body.tag,\\n          color: body.color,\\n          uid: replaceSpaceFromString(body.name)\\n        }, { new: true }).exec(function (err, data) {\\n          if (err) {\\n            return res.status(404).json({ message: 'The project is not updated.' });\\n          }\\n\\n          fs__WEBPACK_IMPORTED_MODULE_4___default.a.unlink(body.oldImagePath, function (err) {\\n            if (err) {\\n              return res.status(404).json({ message: \\\"Can't remove image.\\\" });\\n            }\\n\\n            return res.status(200).json(data);\\n          });\\n        });\\n        // Update the project based on project_id received from the body;\\n      } else {\\n        next();\\n      }\\n    });\\n  },\\n  delete: function _delete(req, res) {\\n\\n    _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOneAndRemove({ uid: req.query.uid }).exec(function (err, data) {\\n      var images = [];\\n\\n      if (err) {\\n\\n        return res.status(400).json({ message: \\\"Can't remove the project.\\\" });\\n      }\\n      images.push(data.imageUrl);\\n      images = images.concat(data.uploads);\\n      deleteFiles(images, function (err) {\\n        if (err) {\\n          return res.status(405).json({ message: \\\"Can't remove files.\\\", error: err });\\n        }\\n\\n        return res.status(200).json(data);\\n      });\\n    });\\n  }\\n};\\n\\n/* harmony default export */ __webpack_exports__[\\\"default\\\"] = (projectsController);//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvY29udHJvbGxlcnMvcHJvamVjdHNDb250cm9sbGVyLmpzPzE2NTIiXSwibmFtZXMiOlsicmVwbGFjZVNwYWNlRnJvbVN0cmluZyIsInN0cmluZyIsInN0ciIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJyZXBsYWNlIiwiZGVsZXRlRmlsZXMiLCJhcnIiLCJjYiIsImZvckVhY2giLCJmaWxlUGF0aCIsImlkeCIsImZzIiwidW5saW5rIiwiZXJyIiwibGVuZ3RoIiwiYXdzIiwiY29uZmlnIiwidXBkYXRlIiwiYWNjZXNzS2V5SWQiLCJwcm9jZXNzIiwic2VjcmV0QWNjZXNzS2V5IiwicmVnaW9uIiwiczMiLCJTMyIsInN0b3JhZ2UiLCJtdWx0ZXJTMyIsImJ1Y2tldCIsImFjbCIsIm1ldGFEYXRhIiwicmVxIiwiZmlsZSIsImZpZWxkTmFtZSIsImZpbGVuYW1lIiwib3JpZ2luYWxuYW1lIiwia2V5IiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwidXBsb2FkIiwibXVsdGVyIiwic2luZ2xlIiwicHJvamVjdHNDb250cm9sbGVyIiwiZ2V0IiwicmVzIiwibmV4dCIsInF1ZXJ5IiwidWlkIiwiUHJvamVjdCIsImZpbmRPbmUiLCJleGVjIiwiZGF0YSIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZ2V0QWxsIiwiZmluZCIsImFkZEltYWdlIiwiYm9keSIsIk11bHRlckVycm9yIiwibXVsdGVyRXJyb3IiLCJmaW5kT25lQW5kVXBkYXRlIiwiJHB1c2giLCJ1cGxvYWRzIiwicGF0aCIsIm5ldyIsImVycm9yIiwicmVtb3ZlSW1hZ2UiLCJpZCIsIiRwdWxsIiwidXBzZXJ0IiwiY3JlYXRlIiwiY29uc29sZSIsImxvZyIsImltYWdlVXJsIiwiZGVzY3JpcHRpb24iLCJuYW1lIiwidGFnIiwiY29sb3IiLCJ1cGRhdGVJbWFnZSIsInVwbG9hZFdpdGhNZXRhSW1hZ2UiLCJvbGRJbWFnZVBhdGgiLCJkZWxldGUiLCJmaW5kT25lQW5k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VixFQUFyQixDQUFQO0FBQ0Q7QUFDRDhCLGFBQU9DLElBQVAsQ0FBWWxDLEtBQUt1QixRQUFqQjtBQUNBVSxlQUFTQSxPQUFPRSxNQUFQLENBQWNuQyxLQUFLWSxPQUFuQixDQUFUO0FBQ0F6RCxrQkFBWThFLE1BQVosRUFBb0IsVUFBQ3RFLEdBQUQsRUFBUztBQUMzQixZQUFHQSxHQUFILEVBQVE7QUFDTixpQkFBTzhCLElBQUlRLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQixFQUFDQyxTQUFTLHFCQUFWLEVBQWlDWSxPQUFPcEQsR0FBeEMsRUFBckIsQ0FBUDtBQUNEOztBQUVELGVBQU84QixJQUFJUSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUJGLElBQXJCLENBQVA7QUFDRCxPQU5EO0FBUUQsS0FyQkQ7QUFzQkQ7QUFoT3dCLENBQTNCOztBQW1PZVQsaUZBQWYiLCJmaWxlIjoiLi9hcGkvY29udHJvbGxlcnMvcHJvamVjdHNDb250cm9sbGVyLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb2plY3QgZnJvbSAnLi4vbW9kZWxzL3Byb2plY3QnO1xyXG5pbXBvcnQgbXVsdGVyIGZyb20gJ211bHRlcic7XHJcbmltcG9ydCBtdWx0ZXJTMyBmcm9tICdtdWx0ZXItczMnO1xyXG5pbXBvcnQgYXdzIGZyb20gJ2F3cy1zZGsnO1xyXG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xyXG5cclxuY29uc3QgcmVwbGFjZVNwYWNlRnJvbVN0cmluZyA9IChzdHJpbmcpID0+IHtcclxuICBsZXQgc3RyID0gc3RyaW5nLnRvTG93ZXJDYXNlKCk7XHJcbiAgd2hpbGUgKHN0ci5pbmNsdWRlcygnICcpKSB7XHJcbiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKCcgJywgJy0nKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBzdHI7XHJcbn1cclxuXHJcblxyXG5jb25zdCBkZWxldGVGaWxlcyA9IChhcnIsIGNiKSA9PiB7XHJcblxyXG4gIGFyci5mb3JFYWNoKChmaWxlUGF0aCwgaWR4KSA9PiB7XHJcblxyXG4gICAgZnMudW5saW5rKGZpbGVQYXRoLCAoZXJyKSA9PiB7XHJcblxyXG4gICAgICBpZihlcnIpIHtcclxuICAgICAgICBjYihlcnIpO1xyXG5cclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSBpZihpZHggPT09IGFyci5sZW5ndGggLTEpIHtcclxuICAgICAgICAgIGNiKG51bGwpO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH0pXHJcbn1cclxuXHJcbmF3cy5jb25maWcudXBkYXRlKHtcclxuICBhY2Nlc3NLZXlJZDogcHJvY2Vzcy5lbnYuQVdTX0FDQ0VTU19LRVlfSUQgfHwgXCJBS0lBSkNGNlVYU1ZBM1pBNkUzUVwiLFxyXG4gIHNlY3JldEFjY2Vzc0tleTogcHJvY2Vzcy5lbnYuQVdTX1NFQ1JFVF9BQ0NFU1NfS0VZIHx8IFwiUGg1bTNFdVlZZ1FqZ05KdmFiYnZuTGFjUmpSYS9Id2I3UUFCdzdXWlwiLFxyXG4gIHJlZ2lvbjogJ2V1LXdlc3QtMidcclxufSlcclxuY29uc3QgczMgPSBuZXcgYXdzLlMzKClcclxuXHJcbmNvbnN0IHN0b3JhZ2UgPSBtdWx0ZXJTMyh7XHJcbiAgczM6IHMzLFxyXG4gIGJ1Y2tldDogJ3JhZGVzaWduJyxcclxuICBhY2w6ICdwdWJsaWMtcmVhZCcsXHJcbiAgbWV0YURhdGE6IGZ1bmN0aW9uKHJlcSwgZmlsZSwgY2IpIHtcclxuICAgIGNiKG51bGwsIHtmaWVsZE5hbWU6IHJlcGxhY2VTcGFjZUZyb21TdHJpbmcoZmlsZS5maWVsZE5hbWUpLCBmaWxlbmFtZTogcmVwbGFjZVNwYWNlRnJvbVN0cmluZyhmaWxlLm9yaWdpbmFsbmFtZSl9KTtcclxuICB9LFxyXG4gIGtleTogZnVuY3Rpb24ocmVxLCBmaWxlLCBjYikge1xyXG4gICAgY2IobnVsbCwgRGF0ZS5ub3coKS50b1N0cmluZygpKTtcclxuICB9XHJcbn0pXHJcblxyXG5jb25zdCB1cGxvYWQgPSBtdWx0ZXIoe3N0b3JhZ2U6IHN0b3JhZ2V9KS5zaW5nbGUoJ2ltYWdlJyk7XHJcblxyXG5jb25zdCBwcm9qZWN0c0NvbnRyb2xsZXIgPSB7XHJcbiAgZ2V0KHJlcSwgcmVzLCBuZXh0KSB7XHJcblxyXG4gICAgaWYocmVxLnF1ZXJ5LnVpZCkge1xyXG4gICAgICBQcm9qZWN0XHJcbiAgICAgIC5maW5kT25lKHt1aWQ6IHJlcS5xdWVyeS51aWR9KVxyXG5cclxuICAgICAgLmV4ZWMoKGVyciwgZGF0YSkgPT4ge1xyXG5cclxuICAgICAgICBpZihlcnIpIHtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7bWVzc2FnZTogXCJOb3QgZm91bmRcIn0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGEpO1xyXG4gICAgICB9KVxyXG5cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBuZXh0KCk7XHJcbiAgICB9XHJcblxyXG5cclxuICB9LFxyXG5cclxuICBnZXRBbGwocmVxLCByZXMpIHtcclxuXHJcbiAgICBQcm9qZWN0XHJcblxyXG4gICAgLmZpbmQoKVxyXG5cclxuICAgIC5leGVjKChlcnIsIGRhdGEpID0+IHtcclxuXHJcbiAgICAgIGlmKGVycikge1xyXG4gICAgICAgIHJldHVybiAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe21lc3NhZ2U6IFwiUHJvamVjdHMgbm90IGZvdW5kXCJ9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKTtcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgYWRkSW1hZ2UocmVxLCByZXMpIHtcclxuICAgIHVwbG9hZChyZXEsIHJlcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgIGNvbnN0IGZpbGUgPSByZXEuZmlsZTtcclxuXHJcbiAgICAgIGNvbnN0IHVpZCA9IHJlcS5ib2R5LnVpZDtcclxuXHJcbiAgICAgIGlmKGVyciBpbnN0YW5jZW9mIG11bHRlci5NdWx0ZXJFcnJvcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7bXVsdGVyRXJyb3I6IGVycn0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBQcm9qZWN0XHJcblxyXG4gICAgICAuZmluZE9uZUFuZFVwZGF0ZSh7dWlkOiB1aWR9LFxyXG4gICAgICB7XHJcbiAgICAgICAgJHB1c2g6IHtcclxuICAgICAgICAgIHVwbG9hZHM6IGZpbGUucGF0aFxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIG5ldzogdHJ1ZVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLmV4ZWMoKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgICAgIGlmKGVycikge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtlcnJvcjogZXJyfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKTtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgcmVtb3ZlSW1hZ2UocmVxLCByZXMpIHtcclxuICAgIGNvbnN0IHVpZCA9IHJlcS5ib2R5LnVpZDtcclxuICAgIGNvbnN0IHBhdGggPSByZXEuYm9keS5wYXRoO1xyXG4gICAgUHJvamVjdFxyXG5cclxuICAgIC5maW5kT25lQW5kVXBkYXRlKGlkLFxyXG4gICAge1xyXG4gICAgICAkcHVsbDoge1xyXG4gICAgICAgIHVwbG9hZHM6IHBhdGhcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdXBzZXJ0OiB0cnVlLFxyXG4gICAgICBuZXc6IHRydWVcclxuICAgIH0pXHJcblxyXG4gICAgLmV4ZWMoKGVyciwgZGF0YSkgPT4ge1xyXG5cclxuICAgICAgaWYoZXJyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtlcnJvcjogZXJyfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgZnMudW5saW5rKHBhdGgsIChlcnIpID0+IHtcclxuICAgICAgICBpZihlcnIpIHtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7ZXJyb3I6IGVycn0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKTtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlKHJlcSwgcmVzKSB7XHJcblxyXG4gICAgdXBsb2FkKHJlcSwgcmVzLCBmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHJlcS5maWxlO1xyXG5cdFx0XHRpZihlcnIgaW5zdGFuY2VvZiBtdWx0ZXIuTXVsdGVyRXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oZXJyKTtcclxuXHRcdFx0fVxyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICAgIGNvbnNvbGUubG9nKGZpbGUsIHJlcS5maWxlKVxyXG5cclxuICAgICAgaWYoZmlsZSkge1xyXG4gICAgICAgIFByb2plY3RcclxuXHJcbiAgICAgICAgLmNyZWF0ZSh7XHJcbiAgICAgICAgICBpbWFnZVVybDogZmlsZS5wYXRoLFxyXG4gICAgICAgICAgZGVzY3JpcHRpb246IHJlcS5ib2R5LmRlc2NyaXB0aW9uLFxyXG4gICAgICAgICAgbmFtZTogcmVxLmJvZHkubmFtZSxcclxuICAgICAgICAgIHVpZDogcmVwbGFjZVNwYWNlRnJvbVN0cmluZyhyZXEuYm9keS5uYW1lKSxcclxuICAgICAgICAgIHRhZzogcmVxLmJvZHkudGFnLFxyXG4gICAgICAgICAgY29sb3I6IHJlcS5ib2R5LmNvbG9yXHJcbiAgICAgICAgfSwgKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgaWYoZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7bWVzc2FnZTogZXJyLm1lc3NhZ2V9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHttZXNzYWdlOiBcIkNhbid0IHVwbG9hZCBpbWFnZS5cIn0pXHJcbiAgICAgIH1cclxuXHJcbiAgICB9KVxyXG4gIH0sXHJcblxyXG4gIHVwZGF0ZShyZXEsIHJlcykge1xyXG4gICAgY29uc3QgdWlkID0gcmVxLmJvZHkudWlkO1xyXG4gICAgY29uc3QgYm9keSA9IHJlcS5ib2R5O1xyXG4gICAgUHJvamVjdFxyXG4gICAgLmZpbmRPbmVBbmRVcGRhdGUoe3VpZDogdWlkfSxcclxuICAgICAge1xyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBib2R5LmRlc2NyaXB0aW9uLFxyXG4gICAgICAgIG5hbWU6IGJvZHkubmFtZSxcclxuICAgICAgICB0YWc6IHJlcS5ib2R5LnRhZyxcclxuICAgICAgICBjb2xvcjogcmVxLmJvZHkuY29sb3IsXHJcbiAgICAgICAgdWlkOiByZXBsYWNlU3BhY2VGcm9tU3RyaW5nKHJlcS5ib2R5LnVpZClcclxuICAgICAgfSwge25ldzogdHJ1ZX0pXHJcblxyXG4gICAgLmV4ZWMoKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgICBpZihlcnIpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe21lc3NhZ2U6ICdUaGUgcHJvamVjdCBpcyBub3QgdXBkYXRlZC4nfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oZGF0YSlcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgdXBkYXRlSW1hZ2UocmVxLCByZXMsIG5leHQpIHtcclxuXHJcbiAgICB1cGxvYWRXaXRoTWV0YUltYWdlKHJlcSwgcmVzLCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgY29uc3QgZmlsZSA9IHJlcS5maWxlO1xyXG4gICAgICBjb25zdCB1aWQgPSByZXEuYm9keS51aWQ7XHJcbiAgICAgIGNvbnN0IGJvZHkgPSByZXEuYm9keTtcclxuXHJcbiAgICAgIGlmKGZpbGUpIHtcclxuICAgICAgICBQcm9qZWN0XHJcbiAgICAgICAgLmZpbmRPbmVBbmRVcGRhdGUoe3VpZDogdWlkfSxcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaW1hZ2VVcmw6IGZpbGUucGF0aCxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246IGJvZHkuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgIG5hbWU6IGJvZHkubmFtZSxcclxuICAgICAgICAgICAgdGFnOiBib2R5LnRhZyxcclxuICAgICAgICAgICAgY29sb3I6IGJvZHkuY29sb3IsXHJcbiAgICAgICAgICAgIHVpZDogcmVwbGFjZVNwYWNlRnJvbVN0cmluZyhib2R5Lm5hbWUpXHJcbiAgICAgICAgICB9LCB7bmV3OiB0cnVlfSlcclxuXHJcbiAgICAgICAgLmV4ZWMoKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgaWYoZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7bWVzc2FnZTogJ1RoZSBwcm9qZWN0IGlzIG5vdCB1cGRhdGVkLid9KVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZzLnVubGluayhib2R5Lm9sZEltYWdlUGF0aCwgKGVycikgPT4ge1xyXG4gICAgICAgICAgICBpZihlcnIpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe21lc3NhZ2U6IFwiQ2FuJ3QgcmVtb3ZlIGltYWdlLlwifSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGEpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcHJvamVjdCBiYXNlZCBvbiBwcm9qZWN0X2lkIHJlY2VpdmVkIGZyb20gdGhlIGJvZHk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIG5leHQoKVxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH0sXHJcblxyXG4gIGRlbGV0ZShyZXEsIHJlcykge1xyXG5cclxuICAgIFByb2plY3RcclxuXHJcbiAgICAuZmluZE9uZUFuZFJlbW92ZSh7dWlkOiByZXEucXVlcnkudWlkfSlcclxuXHJcbiAgICAuZXhlYygoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgIGxldCBpbWFnZXMgPSBbXTtcclxuXHJcbiAgICAgIGlmKGVycikge1xyXG5cclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe21lc3NhZ2U6IFwiQ2FuJ3QgcmVtb3ZlIHRoZSBwcm9qZWN0LlwifSk7XHJcbiAgICAgIH1cclxuICAgICAgaW1hZ2VzLnB1c2goZGF0YS5pbWFnZVVybCk7XHJcbiAgICAgIGltYWdlcyA9IGltYWdlcy5jb25jYXQoZGF0YS51cGxvYWRzKTtcclxuICAgICAgZGVsZXRlRmlsZXMoaW1hZ2VzLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgaWYoZXJyKSB7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oe21lc3NhZ2U6IFwiQ2FuJ3QgcmVtb3ZlIGZpbGVzLlwiLCBlcnJvcjogZXJyfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKTtcclxuICAgICAgfSlcclxuXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgcHJvamVjdHNDb250cm9sbGVyO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9\\n//# sourceURL=webpack-internal:///./api/controllers/projectsController.js\\n\");\n\n//# sourceURL=webpack:///./api/controllers/projectsController.js?");

/***/ })

};