exports.id = "main";
exports.modules = {

/***/ "./api/controllers/projectsController.js":
/*!***********************************************!*\
  !*** ./api/controllers/projectsController.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("eval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _models_project__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../models/project */ \\\"./api/models/project.js\\\");\\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! multer */ \\\"multer\\\");\\n/* harmony import */ var multer__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(multer__WEBPACK_IMPORTED_MODULE_1__);\\n/* harmony import */ var multer_s3__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! multer-s3 */ \\\"multer-s3\\\");\\n/* harmony import */ var multer_s3__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(multer_s3__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! aws-sdk */ \\\"aws-sdk\\\");\\n/* harmony import */ var aws_sdk__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(aws_sdk__WEBPACK_IMPORTED_MODULE_3__);\\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! fs */ \\\"fs\\\");\\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_4__);\\n\\n\\n\\n\\n\\n\\nvar replaceSpaceFromString = function replaceSpaceFromString(string) {\\n  var str = string.toLowerCase();\\n  while (str.includes(' ')) {\\n    str = str.replace(' ', '-');\\n  }\\n\\n  return str;\\n};\\n\\nvar deleteFiles = function deleteFiles(arr, cb) {\\n\\n  arr.forEach(function (filePath, idx) {\\n\\n    fs__WEBPACK_IMPORTED_MODULE_4___default.a.unlink(filePath, function (err) {\\n\\n      if (err) {\\n        cb(err);\\n\\n        return;\\n      } else if (idx === arr.length - 1) {\\n        cb(null);\\n      }\\n    });\\n  });\\n};\\n\\naws_sdk__WEBPACK_IMPORTED_MODULE_3___default.a.config.update({\\n  accessKeyId: \\\"AKIAJCF6UXSVA3ZA6E3Q\\\" || false,\\n  secretAccessKey: \\\"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\\\" || false,\\n  region: 'eu-west-2'\\n});\\nvar s3 = new aws_sdk__WEBPACK_IMPORTED_MODULE_3___default.a.S3();\\n\\nvar storage = multer_s3__WEBPACK_IMPORTED_MODULE_2___default()({\\n  s3: s3,\\n  bucket: 'radesign',\\n  acl: 'public-read',\\n  key: function key(req, file, cb) {\\n    cb(null, file.originalname);\\n  }\\n});\\n\\nvar upload = multer__WEBPACK_IMPORTED_MODULE_1___default()({ storage: storage }).single('image');\\n\\nvar projectsController = {\\n  get: function get(req, res, next) {\\n\\n    if (req.query.uid) {\\n      _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOne({ uid: req.query.uid }).exec(function (err, data) {\\n\\n        if (err) {\\n          return res.status(404).json({ message: \\\"Not found\\\" });\\n        }\\n\\n        return res.status(200).json(data);\\n      });\\n    } else {\\n      next();\\n    }\\n  },\\n  getAll: function getAll(req, res) {\\n\\n    _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].find().exec(function (err, data) {\\n\\n      if (err) {\\n        return res.status(404).json({ message: \\\"Projects not found\\\" });\\n      }\\n\\n      res.status(200).json(data);\\n    });\\n  },\\n  addImage: function addImage(req, res) {\\n    upload(req, res, function (err) {\\n      var file = req.file;\\n\\n      var uid = req.body.uid;\\n\\n      if (err instanceof multer__WEBPACK_IMPORTED_MODULE_1___default.a.MulterError) {\\n        return res.status(400).json({ multerError: err });\\n      }\\n\\n      _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOneAndUpdate({ uid: uid }, {\\n        $push: {\\n          uploads: file.path\\n        }\\n      }, {\\n        new: true\\n      }).exec(function (err, data) {\\n        if (err) {\\n          return res.status(400).json({ error: err });\\n        }\\n\\n        return res.status(200).json(data);\\n      });\\n    });\\n  },\\n  removeImage: function removeImage(req, res) {\\n    var uid = req.body.uid;\\n    var path = req.body.path;\\n    _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOneAndUpdate(id, {\\n      $pull: {\\n        uploads: path\\n      }\\n    }, {\\n      upsert: true,\\n      new: true\\n    }).exec(function (err, data) {\\n\\n      if (err) {\\n        return res.status(400).json({ error: err });\\n      }\\n\\n      fs__WEBPACK_IMPORTED_MODULE_4___default.a.unlink(path, function (err) {\\n        if (err) {\\n          return res.status(400).json({ error: err });\\n        }\\n        return res.status(200).json(data);\\n      });\\n    });\\n  },\\n  create: function create(req, res) {\\n\\n    upload(req, res, function (err) {\\n      var file = req.file;\\n      if (err instanceof multer__WEBPACK_IMPORTED_MODULE_1___default.a.MulterError) {\\n        return res.status(500).json(err);\\n      }\\n      console.log(err);\\n\\n      if (file) {\\n        _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].create({\\n          imageUrl: file.path,\\n          description: req.body.description,\\n          name: req.body.name,\\n          uid: replaceSpaceFromString(req.body.name),\\n          tag: req.body.tag,\\n          color: req.body.color\\n        }, function (err, data) {\\n          if (err) {\\n            return res.status(404).json({ message: err.message });\\n          }\\n\\n          return res.status(200).json(data);\\n        });\\n      } else {\\n        res.status(500).json({ message: \\\"Can't upload image.\\\" });\\n      }\\n    });\\n  },\\n  update: function update(req, res) {\\n    var uid = req.body.uid;\\n    var body = req.body;\\n    _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOneAndUpdate({ uid: uid }, {\\n      description: body.description,\\n      name: body.name,\\n      tag: req.body.tag,\\n      color: req.body.color,\\n      uid: replaceSpaceFromString(req.body.uid)\\n    }, { new: true }).exec(function (err, data) {\\n      if (err) {\\n        return res.status(404).json({ message: 'The project is not updated.' });\\n      }\\n\\n      res.status(200).json(data);\\n    });\\n  },\\n  updateImage: function updateImage(req, res, next) {\\n\\n    uploadWithMetaImage(req, res, function (err) {\\n      var file = req.file;\\n      var uid = req.body.uid;\\n      var body = req.body;\\n\\n      if (file) {\\n        _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOneAndUpdate({ uid: uid }, {\\n          imageUrl: file.path,\\n          description: body.description,\\n          name: body.name,\\n          tag: body.tag,\\n          color: body.color,\\n          uid: replaceSpaceFromString(body.name)\\n        }, { new: true }).exec(function (err, data) {\\n          if (err) {\\n            return res.status(404).json({ message: 'The project is not updated.' });\\n          }\\n\\n          fs__WEBPACK_IMPORTED_MODULE_4___default.a.unlink(body.oldImagePath, function (err) {\\n            if (err) {\\n              return res.status(404).json({ message: \\\"Can't remove image.\\\" });\\n            }\\n\\n            return res.status(200).json(data);\\n          });\\n        });\\n        // Update the project based on project_id received from the body;\\n      } else {\\n        next();\\n      }\\n    });\\n  },\\n  delete: function _delete(req, res) {\\n\\n    _models_project__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"].findOneAndRemove({ uid: req.query.uid }).exec(function (err, data) {\\n      var images = [];\\n\\n      if (err) {\\n\\n        return res.status(400).json({ message: \\\"Can't remove the project.\\\" });\\n      }\\n      images.push(data.imageUrl);\\n      images = images.concat(data.uploads);\\n      deleteFiles(images, function (err) {\\n        if (err) {\\n          return res.status(405).json({ message: \\\"Can't remove files.\\\", error: err });\\n        }\\n\\n        return res.status(200).json(data);\\n      });\\n    });\\n  }\\n};\\n\\n/* harmony default export */ __webpack_exports__[\\\"default\\\"] = (projectsController);//# sourceURL=[module]\\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hcGkvY29udHJvbGxlcnMvcHJvamVjdHNDb250cm9sbGVyLmpzPzE2NTIiXSwibmFtZXMiOlsicmVwbGFjZVNwYWNlRnJvbVN0cmluZyIsInN0cmluZyIsInN0ciIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJyZXBsYWNlIiwiZGVsZXRlRmlsZXMiLCJhcnIiLCJjYiIsImZvckVhY2giLCJmaWxlUGF0aCIsImlkeCIsImZzIiwidW5saW5rIiwiZXJyIiwibGVuZ3RoIiwiYXdzIiwiY29uZmlnIiwidXBkYXRlIiwiYWNjZXNzS2V5SWQiLCJwcm9jZXNzIiwic2VjcmV0QWNjZXNzS2V5IiwicmVnaW9uIiwiczMiLCJTMyIsInN0b3JhZ2UiLCJtdWx0ZXJTMyIsImJ1Y2tldCIsImFjbCIsImtleSIsInJlcSIsImZpbGUiLCJvcmlnaW5hbG5hbWUiLCJ1cGxvYWQiLCJtdWx0ZXIiLCJzaW5nbGUiLCJwcm9qZWN0c0NvbnRyb2xsZXIiLCJnZXQiLCJyZXMiLCJuZXh0IiwicXVlcnkiLCJ1aWQiLCJQcm9qZWN0IiwiZmluZE9uZSIsImV4ZWMiLCJkYXRhIiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJnZXRBbGwiLCJmaW5kIiwiYWRkSW1hZ2UiLCJib2R5IiwiTXVsdGVyRXJyb3IiLCJtdWx0ZXJFcnJvciIsImZpbmRPbmVBbmRVcGRhdGUiLCIkcHVzaCIsInVwbG9hZHMiLCJwYXRoIiwibmV3IiwiZXJyb3IiLCJyZW1vdmVJbWFnZSIsImlkIiwiJHB1bGwiLCJ1cHNlcnQiLCJjcmVhdGUiLCJjb25zb2xlIiwibG9nIiwiaW1hZ2VVcmwiLCJkZXNjcmlwdGlvbiIsIm5hbWUiLCJ0YWciLCJjb2xvciIsInVwZGF0ZUltYWdlIiwidXBsb2FkV2l0aE1ldGFJbWFnZSIsIm9sZEltYWdlUGF0aCIsImRlbGV0ZSIsImZpbmRPbmVBbmRSZW1vdmUiLCJpbWFnZXMiLCJwdXNoIiwiY29uY2F0Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FB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QWdCQyxJQUFoQixDQUFxQkYsSUFBckIsQ0FBUDtBQUNELE9BTkQ7QUFRRCxLQXJCRDtBQXNCRDtBQS9Od0IsQ0FBM0I7O0FBa09lVCxpRkFBZiIsImZpbGUiOiIuL2FwaS9jb250cm9sbGVycy9wcm9qZWN0c0NvbnRyb2xsZXIuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUHJvamVjdCBmcm9tICcuLi9tb2RlbHMvcHJvamVjdCc7XHJcbmltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJztcclxuaW1wb3J0IG11bHRlclMzIGZyb20gJ211bHRlci1zMyc7XHJcbmltcG9ydCBhd3MgZnJvbSAnYXdzLXNkayc7XHJcbmltcG9ydCBmcyBmcm9tICdmcyc7XHJcblxyXG5jb25zdCByZXBsYWNlU3BhY2VGcm9tU3RyaW5nID0gKHN0cmluZykgPT4ge1xyXG4gIGxldCBzdHIgPSBzdHJpbmcudG9Mb3dlckNhc2UoKTtcclxuICB3aGlsZSAoc3RyLmluY2x1ZGVzKCcgJykpIHtcclxuICAgICAgc3RyID0gc3RyLnJlcGxhY2UoJyAnLCAnLScpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHN0cjtcclxufVxyXG5cclxuXHJcbmNvbnN0IGRlbGV0ZUZpbGVzID0gKGFyciwgY2IpID0+IHtcclxuXHJcbiAgYXJyLmZvckVhY2goKGZpbGVQYXRoLCBpZHgpID0+IHtcclxuXHJcbiAgICBmcy51bmxpbmsoZmlsZVBhdGgsIChlcnIpID0+IHtcclxuXHJcbiAgICAgIGlmKGVycikge1xyXG4gICAgICAgIGNiKGVycik7XHJcblxyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBlbHNlIGlmKGlkeCA9PT0gYXJyLmxlbmd0aCAtMSkge1xyXG4gICAgICAgICAgY2IobnVsbCk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSlcclxufVxyXG5cclxuYXdzLmNvbmZpZy51cGRhdGUoe1xyXG4gIGFjY2Vzc0tleUlkOiBwcm9jZXNzLmVudi5BV1NfQUNDRVNTX0tFWV9JRCB8fCBcIkFLSUFKQ0Y2VVhTVkEzWkE2RTNRXCIsXHJcbiAgc2VjcmV0QWNjZXNzS2V5OiBwcm9jZXNzLmVudi5BV1NfU0VDUkVUX0FDQ0VTU19LRVkgfHwgXCJQaDVtM0V1WVlnUWpnTkp2YWJidm5MYWNSalJhL0h3YjdRQUJ3N1daXCIsXHJcbiAgcmVnaW9uOiAnZXUtd2VzdC0yJ1xyXG59KVxyXG5jb25zdCBzMyA9IG5ldyBhd3MuUzMoKVxyXG5cclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlclMzKHtcclxuICBzMzogczMsXHJcbiAgYnVja2V0OiAncmFkZXNpZ24nLFxyXG4gIGFjbDogJ3B1YmxpYy1yZWFkJyxcclxuICBrZXk6IGZ1bmN0aW9uKHJlcSwgZmlsZSwgY2IpIHtcclxuICAgIGNiKG51bGwsIGZpbGUub3JpZ2luYWxuYW1lKTtcclxuICB9XHJcbn0pXHJcblxyXG5jb25zdCB1cGxvYWQgPSBtdWx0ZXIoe3N0b3JhZ2U6IHN0b3JhZ2V9KS5zaW5nbGUoJ2ltYWdlJyk7XHJcblxyXG5jb25zdCBwcm9qZWN0c0NvbnRyb2xsZXIgPSB7XHJcbiAgZ2V0KHJlcSwgcmVzLCBuZXh0KSB7XHJcblxyXG4gICAgaWYocmVxLnF1ZXJ5LnVpZCkge1xyXG4gICAgICBQcm9qZWN0XHJcbiAgICAgIC5maW5kT25lKHt1aWQ6IHJlcS5xdWVyeS51aWR9KVxyXG5cclxuICAgICAgLmV4ZWMoKGVyciwgZGF0YSkgPT4ge1xyXG5cclxuICAgICAgICBpZihlcnIpIHtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7bWVzc2FnZTogXCJOb3QgZm91bmRcIn0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGEpO1xyXG4gICAgICB9KVxyXG5cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICBuZXh0KCk7XHJcbiAgICB9XHJcblxyXG5cclxuICB9LFxyXG5cclxuICBnZXRBbGwocmVxLCByZXMpIHtcclxuXHJcbiAgICBQcm9qZWN0XHJcblxyXG4gICAgLmZpbmQoKVxyXG5cclxuICAgIC5leGVjKChlcnIsIGRhdGEpID0+IHtcclxuXHJcbiAgICAgIGlmKGVycikge1xyXG4gICAgICAgIHJldHVybiAgcmVzLnN0YXR1cyg0MDQpLmpzb24oe21lc3NhZ2U6IFwiUHJvamVjdHMgbm90IGZvdW5kXCJ9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKTtcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgYWRkSW1hZ2UocmVxLCByZXMpIHtcclxuICAgIHVwbG9hZChyZXEsIHJlcywgZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgIGNvbnN0IGZpbGUgPSByZXEuZmlsZTtcclxuXHJcbiAgICAgIGNvbnN0IHVpZCA9IHJlcS5ib2R5LnVpZDtcclxuXHJcbiAgICAgIGlmKGVyciBpbnN0YW5jZW9mIG11bHRlci5NdWx0ZXJFcnJvcikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7bXVsdGVyRXJyb3I6IGVycn0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBQcm9qZWN0XHJcblxyXG4gICAgICAuZmluZE9uZUFuZFVwZGF0ZSh7dWlkOiB1aWR9LFxyXG4gICAgICB7XHJcbiAgICAgICAgJHB1c2g6IHtcclxuICAgICAgICAgIHVwbG9hZHM6IGZpbGUucGF0aFxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIG5ldzogdHJ1ZVxyXG4gICAgICB9KVxyXG5cclxuICAgICAgLmV4ZWMoKGVyciwgZGF0YSkgPT4ge1xyXG4gICAgICAgIGlmKGVycikge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtlcnJvcjogZXJyfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKTtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgcmVtb3ZlSW1hZ2UocmVxLCByZXMpIHtcclxuICAgIGNvbnN0IHVpZCA9IHJlcS5ib2R5LnVpZDtcclxuICAgIGNvbnN0IHBhdGggPSByZXEuYm9keS5wYXRoO1xyXG4gICAgUHJvamVjdFxyXG5cclxuICAgIC5maW5kT25lQW5kVXBkYXRlKGlkLFxyXG4gICAge1xyXG4gICAgICAkcHVsbDoge1xyXG4gICAgICAgIHVwbG9hZHM6IHBhdGhcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgdXBzZXJ0OiB0cnVlLFxyXG4gICAgICBuZXc6IHRydWVcclxuICAgIH0pXHJcblxyXG4gICAgLmV4ZWMoKGVyciwgZGF0YSkgPT4ge1xyXG5cclxuICAgICAgaWYoZXJyKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHtlcnJvcjogZXJyfSlcclxuICAgICAgfVxyXG5cclxuICAgICAgZnMudW5saW5rKHBhdGgsIChlcnIpID0+IHtcclxuICAgICAgICBpZihlcnIpIHtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7ZXJyb3I6IGVycn0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKTtcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlKHJlcSwgcmVzKSB7XHJcblxyXG4gICAgdXBsb2FkKHJlcSwgcmVzLCBmdW5jdGlvbihlcnIpIHtcclxuXHRcdFx0Y29uc3QgZmlsZSA9IHJlcS5maWxlO1xyXG5cdFx0XHRpZihlcnIgaW5zdGFuY2VvZiBtdWx0ZXIuTXVsdGVyRXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oZXJyKTtcclxuXHRcdFx0fVxyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpXHJcblxyXG4gICAgICBpZihmaWxlKSB7XHJcbiAgICAgICAgUHJvamVjdFxyXG5cclxuICAgICAgICAuY3JlYXRlKHtcclxuICAgICAgICAgIGltYWdlVXJsOiBmaWxlLnBhdGgsXHJcbiAgICAgICAgICBkZXNjcmlwdGlvbjogcmVxLmJvZHkuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgICBuYW1lOiByZXEuYm9keS5uYW1lLFxyXG4gICAgICAgICAgdWlkOiByZXBsYWNlU3BhY2VGcm9tU3RyaW5nKHJlcS5ib2R5Lm5hbWUpLFxyXG4gICAgICAgICAgdGFnOiByZXEuYm9keS50YWcsXHJcbiAgICAgICAgICBjb2xvcjogcmVxLmJvZHkuY29sb3JcclxuICAgICAgICB9LCAoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICBpZihlcnIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHttZXNzYWdlOiBlcnIubWVzc2FnZX0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGEpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe21lc3NhZ2U6IFwiQ2FuJ3QgdXBsb2FkIGltYWdlLlwifSlcclxuICAgICAgfVxyXG5cclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgdXBkYXRlKHJlcSwgcmVzKSB7XHJcbiAgICBjb25zdCB1aWQgPSByZXEuYm9keS51aWQ7XHJcbiAgICBjb25zdCBib2R5ID0gcmVxLmJvZHk7XHJcbiAgICBQcm9qZWN0XHJcbiAgICAuZmluZE9uZUFuZFVwZGF0ZSh7dWlkOiB1aWR9LFxyXG4gICAgICB7XHJcbiAgICAgICAgZGVzY3JpcHRpb246IGJvZHkuZGVzY3JpcHRpb24sXHJcbiAgICAgICAgbmFtZTogYm9keS5uYW1lLFxyXG4gICAgICAgIHRhZzogcmVxLmJvZHkudGFnLFxyXG4gICAgICAgIGNvbG9yOiByZXEuYm9keS5jb2xvcixcclxuICAgICAgICB1aWQ6IHJlcGxhY2VTcGFjZUZyb21TdHJpbmcocmVxLmJvZHkudWlkKVxyXG4gICAgICB9LCB7bmV3OiB0cnVlfSlcclxuXHJcbiAgICAuZXhlYygoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgIGlmKGVycikge1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7bWVzc2FnZTogJ1RoZSBwcm9qZWN0IGlzIG5vdCB1cGRhdGVkLid9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihkYXRhKVxyXG4gICAgfSlcclxuICB9LFxyXG5cclxuICB1cGRhdGVJbWFnZShyZXEsIHJlcywgbmV4dCkge1xyXG5cclxuICAgIHVwbG9hZFdpdGhNZXRhSW1hZ2UocmVxLCByZXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICBjb25zdCBmaWxlID0gcmVxLmZpbGU7XHJcbiAgICAgIGNvbnN0IHVpZCA9IHJlcS5ib2R5LnVpZDtcclxuICAgICAgY29uc3QgYm9keSA9IHJlcS5ib2R5O1xyXG5cclxuICAgICAgaWYoZmlsZSkge1xyXG4gICAgICAgIFByb2plY3RcclxuICAgICAgICAuZmluZE9uZUFuZFVwZGF0ZSh7dWlkOiB1aWR9LFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpbWFnZVVybDogZmlsZS5wYXRoLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogYm9keS5kZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgbmFtZTogYm9keS5uYW1lLFxyXG4gICAgICAgICAgICB0YWc6IGJvZHkudGFnLFxyXG4gICAgICAgICAgICBjb2xvcjogYm9keS5jb2xvcixcclxuICAgICAgICAgICAgdWlkOiByZXBsYWNlU3BhY2VGcm9tU3RyaW5nKGJvZHkubmFtZSlcclxuICAgICAgICAgIH0sIHtuZXc6IHRydWV9KVxyXG5cclxuICAgICAgICAuZXhlYygoZXJyLCBkYXRhKSA9PiB7XHJcbiAgICAgICAgICBpZihlcnIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHttZXNzYWdlOiAnVGhlIHByb2plY3QgaXMgbm90IHVwZGF0ZWQuJ30pXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZnMudW5saW5rKGJvZHkub2xkSW1hZ2VQYXRoLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGVycikge1xyXG4gICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7bWVzc2FnZTogXCJDYW4ndCByZW1vdmUgaW1hZ2UuXCJ9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oZGF0YSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBwcm9qZWN0IGJhc2VkIG9uIHByb2plY3RfaWQgcmVjZWl2ZWQgZnJvbSB0aGUgYm9keTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgbmV4dCgpXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgZGVsZXRlKHJlcSwgcmVzKSB7XHJcblxyXG4gICAgUHJvamVjdFxyXG5cclxuICAgIC5maW5kT25lQW5kUmVtb3ZlKHt1aWQ6IHJlcS5xdWVyeS51aWR9KVxyXG5cclxuICAgIC5leGVjKChlcnIsIGRhdGEpID0+IHtcclxuICAgICAgbGV0IGltYWdlcyA9IFtdO1xyXG5cclxuICAgICAgaWYoZXJyKSB7XHJcblxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7bWVzc2FnZTogXCJDYW4ndCByZW1vdmUgdGhlIHByb2plY3QuXCJ9KTtcclxuICAgICAgfVxyXG4gICAgICBpbWFnZXMucHVzaChkYXRhLmltYWdlVXJsKTtcclxuICAgICAgaW1hZ2VzID0gaW1hZ2VzLmNvbmNhdChkYXRhLnVwbG9hZHMpO1xyXG4gICAgICBkZWxldGVGaWxlcyhpbWFnZXMsIChlcnIpID0+IHtcclxuICAgICAgICBpZihlcnIpIHtcclxuICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7bWVzc2FnZTogXCJDYW4ndCByZW1vdmUgZmlsZXMuXCIsIGVycm9yOiBlcnJ9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGRhdGEpO1xyXG4gICAgICB9KVxyXG5cclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBwcm9qZWN0c0NvbnRyb2xsZXI7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\\n//# sourceURL=webpack-internal:///./api/controllers/projectsController.js\\n\");\n\n//# sourceURL=webpack:///./api/controllers/projectsController.js?");

/***/ })

};